# 打车小程序 - 微信小程序版本

这是一个从React源码转换而来的微信小程序项目，保留了所有原有的UI设计和功能特性。

## 项目结构

```
miniprogram/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序全局配置
├── app.wxss              # 全局样式文件
├── sitemap.json          # 索引配置
├── pages/                # 页面目录
│   ├── index/           # 主页（地图+打车服务）
│   │   ├── index.js
│   │   ├── index.wxml
│   │   ├── index.wxss
│   │   └── index.json
│   └── profile/         # 个人中心页
│       ├── profile.js
│       ├── profile.wxml
│       ├── profile.wxss
│       └── profile.json
├── utils/               # 工具函数
│   ├── util.js         # 通用工具
│   └── map.js          # 地图相关工具
└── assets/             # 资源文件
    └── icons/          # 图标资源
```

## 功能特性

### 1. 主页功能
- ✅ 实时地图显示
- ✅ 车辆位置标记
- ✅ 多种出行服务选择（快车、顺风车、代驾、机器人、无人车）
- ✅ 地址输入和路线规划
- ✅ 价格预估
- ✅ 订单确认
- ✅ 乘客数选择

### 2. 个人中心功能
- ✅ 主题切换（深色/浅色模式）
- ✅ 主题设置持久化存储
- ✅ 用户信息展示
- ✅ 功能入口列表

### 3. 主题系统
- **浅色模式**：简约淡色系设计
- **深色模式**：科技感深蓝/黑色 + 霓虹蓝/青绿色

## 使用说明

### 1. 开发环境要求
- 微信开发者工具（最新稳定版）
- 微信小程序基础库 3.11.1 或更高版本

### 2. 导入项目
1. 打开微信开发者工具
2. 选择"导入项目"
3. 选择项目根目录（包含project.config.json的目录）
4. 填写AppID（可使用测试号）
5. 点击"导入"

### 3. 配置说明

#### project.config.json
项目配置文件已设置好基本参数：
- `miniprogramRoot`: "miniprogram/" - 小程序代码根目录
- `appid`: "touristappid" - 请替换为您自己的AppID
- `libVersion`: "3.11.1" - 基础库版本

#### app.json
全局配置已包含：
- 页面路径配置
- TabBar配置（文字导航）
- 地理位置权限配置
- 网络超时配置

### 4. 权限配置

小程序需要以下权限：
- **地理位置权限**：用于显示用户位置和附近车辆
  - 在真机测试时，需要用户授权
  - 可在"设置 > 隐私 > 位置信息"中管理

### 5. 本地调试
1. 在微信开发者工具中打开项目
2. 点击"编译"按钮
3. 在模拟器中预览效果
4. 使用"真机调试"测试完整功能

## 功能流程

### 打车流程
1. 用户进入主页，查看地图和周边车辆
2. 选择出行服务类型（快车/顺风车/代驾等）
3. 输入上车地址和目的地
4. 系统自动计算距离、价格和预估时间
5. 确认行程信息
6. 选择乘客数量
7. 立即下单

### 主题切换流程
1. 进入"我的"页面
2. 点击"深色模式"开关
3. 主题即时切换
4. 设置自动保存到本地存储
5. 下次打开应用自动应用保存的主题

## 技术特点

### 1. 小程序原生组件
- 使用 `<map>` 组件实现地图功能
- 使用 `<input>` 组件实现地址输入
- 使用 TabBar 实现页面导航

### 2. 数据存储
- 使用 `wx.setStorageSync` / `wx.getStorageSync` 进行本地数据持久化
- 主题设置自动保存和加载

### 3. 样式适配
- 完全保留原React应用的UI设计
- 使用CSS变量实现主题切换
- 响应式布局适配不同屏幕尺寸

### 4. 交互体验
- 模拟可拖动面板效果（通过固定高度实现）
- 流畅的页面切换动画
- 友好的操作反馈

## 注意事项

### 1. 地图功能
- 小程序使用腾讯地图（GCJ-02坐标系）
- 需要在真机上测试地图和定位功能
- 开发环境可使用模拟位置

### 2. 图标资源
- 当前版本使用文字TabBar
- 如需添加图标，请参考 `assets/icons/README.md`
- 图标尺寸建议：81x81px (@3x) 或 54x54px (@2x)

### 3. API调用
- 当前版本使用模拟数据
- 实际使用时需要对接真实的后端API
- 建议使用 `wx.request` 进行网络请求

### 4. 权限申请
- 首次使用地理位置功能时会弹出授权提示
- 如用户拒绝授权，需引导用户在设置中开启

## 待扩展功能

以下功能可根据需求添加：
- [ ] 用户登录/注册
- [ ] 订单历史记录
- [ ] 支付功能
- [ ] 实时定位跟踪
- [ ] 司机信息展示
- [ ] 评价系统
- [ ] 优惠券功能
- [ ] 客服咨询

## 开发建议

### 1. 后端接口对接
在 `utils/` 目录下创建 `api.js` 文件，封装所有API请求：
```javascript
// utils/api.js
const request = (url, method = 'GET', data = {}) => {
  return new Promise((resolve, reject) => {
    wx.request({
      url: baseURL + url,
      method,
      data,
      success: resolve,
      fail: reject
    })
  })
}
```

### 2. 添加更多页面
在 `pages/` 目录下创建新页面，并在 `app.json` 中注册。

### 3. 组件化开发
在项目根目录创建 `components/` 目录，将可复用的UI组件提取出来。

## 版本历史

### v1.0.0 (当前版本)
- ✅ 完成React源码到小程序的转换
- ✅ 实现所有核心功能
- ✅ 保持原有UI设计和交互
- ✅ 支持深色/浅色主题切换

## 技术支持

如遇到问题，请检查：
1. 微信开发者工具版本是否为最新
2. 基础库版本是否符合要求
3. AppID是否正确配置
4. 权限设置是否正确

## 许可证

本项目为微信小程序适配版本，保留所有原始设计和功能。

